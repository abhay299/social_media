import "./rightBar.scss";
import { useQuery } from "@tanstack/react-query";
import { makeRequest } from "../../axios";

const RightBar = () => {

	const { isLoading, error, data } = useQuery(["users"], () =>
		makeRequest.get("/users").then((res) => {
			return res.data
		})
	);

	return (
		<div className="rightBar">
			<div className="container">
				<div className="item">
					<span>Suggestions For You</span>
					{error ? "Something went wrong..."
						: isLoading
							? "loading..."
							: data.map((user) => {
								return (
									<div className="user" key={user.id}>
										<div className="userInfo">
											<img src={"/upload/" + user.profilePic} alt="" />
											<span>{user.name}</span>
										</div>
										<div className="buttons">
											<button>follow</button>
											<button>reject</button>
										</div>
									</div>
								);
							})}
				</div>
				<div className="item">
					<span>Latest Activities</span>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<p>
								<span>Mary Jane</span> changed their cover picture
							</p>
						</div>
						<span>1 min ago</span>
					</div>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<p>
								<span>Jerome Pitz</span> changed their cover picture
							</p>
						</div>
						<span>1 min ago</span>
					</div>
				</div>
				<div className="item">
					<span>Online Friends</span>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<div className="online" />
							<span>Lewy Sedvick</span>
						</div>
					</div>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<div className="online" />
							<span>Jane Doe</span>
						</div>
					</div>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<div className="online" />
							<span>Jane Doe</span>
						</div>
					</div>
					<div className="user">
						<div className="userInfo">
							<img
								src="https://images.pexels.com/photos/4881619/pexels-photo-4881619.jpeg?auto=compress&cs=tinysrgb&w=1600"
								alt=""
							/>
							<div className="online" />
							<span>Jane Doe</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	);
};

export default RightBar;